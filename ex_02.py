import requests

URL = "https://graph.microsoft.com/beta/teams/{team_id}/channels"

AUTH = 'eyJ0eXAiOiJKV1QiLCJub25jZSI6Imk1Y1ZVRzhQa0lScXdwUDN5MC1fVmxlbEJ6cjQ5c01uQWlhVExZN1ZNeHMiLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC85MDFjYjRjYS1iODYyLTQwMjktOTMwNi1lNWNkMGY2ZDlmODYvIiwiaWF0IjoxNjk0MTgyMjg1LCJuYmYiOjE2OTQxODIyODUsImV4cCI6MTY5NDI2ODk4NSwiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkFWUUFxLzhVQUFBQUlGT2JTZFJlRXcyZlF5UnhRdXQrQmpNMS9qWU8xcTlFZDJ3Q2xEb2VKeG94S3p5K3cycGNxSnFpaExBSEd1SURsQkxMR1Q3NldsTUNYNzRUemZDdlNoaXp1dkRNSVppT0NXeWFkQTgzdG1VPSIsImFtciI6WyJwd2QiLCJtZmEiXSwiYXBwX2Rpc3BsYXluYW1lIjoiR3JhcGggRXhwbG9yZXIiLCJhcHBpZCI6ImRlOGJjOGI1LWQ5ZjktNDhiMS1hOGFkLWI3NDhkYTcyNTA2NCIsImFwcGlkYWNyIjoiMCIsImZhbWlseV9uYW1lIjoiRm9jaCIsImdpdmVuX25hbWUiOiJBbnRvbiIsImlkdHlwIjoidXNlciIsImlwYWRkciI6IjJhMDE6Y2IwODoxMDgwOjg0MDA6MTAyYzoyNDA4OjYyY2Y6YjdiZCIsIm5hbWUiOiJBbnRvbiBGb2NoIiwib2lkIjoiMGY5MjRlYTMtYWNmMS00MGUyLTkzZTQtMjczOWU0MTM3MTY3Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTE1NTI0MzUyNzctMTU5NjQ5NTc5NS0zMDg5NjEzNzMxLTQ2NTQ0IiwicGxhdGYiOiIzIiwicHVpZCI6IjEwMDMyMDAxRTVENzI5N0QiLCJyaCI6IjAuQVhRQXlyUWNrR0s0S1VDVEJ1WE5EMjJmaGdNQUFBQUFBQUFBd0FBQUFBQUFBQUIwQUtzLiIsInNjcCI6Ikdyb3VwLlJlYWQuQWxsIEdyb3VwLlJlYWRXcml0ZS5BbGwgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIGVtYWlsIiwic2lnbmluX3N0YXRlIjpbImttc2kiXSwic3ViIjoiWF8yX1ptcW8zN0JVbUdQSkp1ai1BWUZrdENmQk5LNjI2ZHpFdk9KZGpxUSIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJFVSIsInRpZCI6IjkwMWNiNGNhLWI4NjItNDAyOS05MzA2LWU1Y2QwZjZkOWY4NiIsInVuaXF1ZV9uYW1lIjoiYW50b24uZm9jaEBlcGl0ZWNoLmRpZ2l0YWwiLCJ1cG4iOiJhbnRvbi5mb2NoQGVwaXRlY2guZGlnaXRhbCIsInV0aSI6IlB4em9pNjB3OWtPZ1FxeElOZnZaQUEiLCJ2ZXIiOiIxLjAiLCJ3aWRzIjpbImI3OWZiZjRkLTNlZjktNDY4OS04MTQzLTc2YjE5NGU4NTUwOSJdLCJ4bXNfY2MiOlsiQ1AxIl0sInhtc19zc20iOiIxIiwieG1zX3N0Ijp7InN1YiI6ImhJSHdYbGdSQTFRRWdVdDJ5eG9IYVJvbFVFQlhNLXUxd0FORGZ4bFBMb2MifSwieG1zX3RjZHQiOjE0MTc4MDQ4ODcsInhtc190ZGJyIjoiRVUifQ.LZ2SzTqIIy2fgNe5qwibvLlBJiBff8kBHf9gYYXwOewooo1g0ZFI1dh0yyN9wr7BWuz8WIN6cNKUVHesX94plOfYIQtu8knlSKLGBE8m0kQv4-3QvouTbOJthUFLqVEmy2_64R1RTOZNpCU4e6Adiok0xJjONI1RMgxKupPwUO8UXoLJ6PFRG4c5YQY3wHAHY0STSJDeqTGL4p4W134gJp-9qECgTklSDR_oCqHXh9uJhQGHUJWwU8IgUcQ4ok1J7UagAFEF_SpXn2TWedFPn_Wxq7UlCCBUSJyl9iFw83G2Z0maove2fXi42co9DYtTRoTkweinXYlfWnGSvxWJqw'


def get_channels(team_id):
    
    url = URL.format(team_id=team_id)

    headers = {"Authorization": f"Bearer {AUTH}"}
    response = requests.get(url, headers=headers)

    if response.status_code == 200:
        data = response.json()
        channels_list = [channel['displayName'] for channel in data['value']]
        return channels_list
            
    else:
        print("Error")
        print(response.text)
        return {}

    
channels = get_channels('e20b4cd7-91be-48ab-ac8d-fe46abd1b6ad')
for channel in channels:
    print(channel)
